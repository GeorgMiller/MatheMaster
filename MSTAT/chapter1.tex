% This work is licensed under the Creative Commons
% Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy
% of this license, visit http://creativecommons.org/licenses/by-nc-sa/4.0/ or
% send a letter to Creative Commons, PO Box 1866, Mountain View, CA 94042, USA.

\chapter{Einführung}
Viele Schätzer in der Statistik sind definiert als Minimal- oder Maximalstelle von bestimmten \textit{Kriteriumsfunktionen}, z. B. der \textit{Maximum-Likelihood-Schätzer (MLS)} oder \textit{Minimum-Qudrat-Schätzer (MQS, KQS)} oder \textit{Bayes-Schätzer}. Allgemein nennt man solche Schätzer \textbf{M-Schätzer}.\\
Ziel: Untersuchung des asymptotischen Verhaltens ($n\to\infty$) von M-Schätzern über einen \textit{funktionalen Ansatz}. Als Beispiel:

\section{Der Median}
Sei $X:(\Omega,\A,\P)\to\R$ eine reelle Zufallsvariable mit Verteilungsfunktion\\ $F_X:\R\to[0,1],~F_X(x):=\P[X\leq x]$, also $X\sim F_X$. Definiere

\begin{align}
Y(t)&:=\E\left(|X-t|\right)\label{DefY}\tag{1.0}\\ \nonumber
&=\int\limits_\Omega |X(\omega)-t|\d\P(\omega)\\ \nonumber
&\stackeq{\text{Trafo}}
\int\limits_\R|x-t|\Big(\P\circ X\d x\Big)\\ \nonumber
&=\int\limits_\R|x-t|(F\d x) \nonumber
\qquad\forall t\in\R\\
m&:=\arg\min\limits_{t\in\R}Y(t):=\text{ (irgendeine) Minimalstelle der Funktion}\nonumber
\end{align} 

\begin{notation}
$F(m-):=F(m-0):=\lim\limits_{t\uparrow m} F(t)$
\end{notation}

Charakterisierung der Menge aller Mediane in folgendem kleinen Lemma:

\begin{lemma}\label{lemmaMedian}
Sei $X\sim F_X$ integrierbar und $m\in\R$. Dann äquivalent:
\begin{enumerate}[label=(\alph*)]
\item $F(m-)\leq\frac{1}{2}\leq F(m)$
\item $\E[|X-t|]\geq\E[|X-m|]\qquad\forall t\in\R$
\item $m$ ist Median
\end{enumerate}
\end{lemma}

\begin{proof}
\underline{Zeige (a) $\Rightarrow$ (b):}\\
Setze $h(t):=\E[|X-t|-|X-m|]\stackeq{\text{Lin}}Y(t)-Y(m)$. Dann ist 2. äquivalent zu $h(t)\geq0~\forall t\in\R$. Dies ist noch zu zeigen.\\

\underline{Fall 1: $t<m$}
\begin{align*}
h(t)&\stackeq{\text{Trafo}}
\int\limits_{\R}|x-t|-|x-m| Q_F(\d x)\\
&=\int\limits_{(-\infty,t]}\underbrace{|x-t|-|x-m|}_{=t-x-(m-x)=-(m-t)} F(\d x)
+\int\limits_{(t,m)}\underbrace{\underbrace{|x-t|-|x-m|}_{\underbrace{x-t}_{\geq0}-\underbrace{(m-x)}_{\leq m-t}}}_{\geq-(m-t)} F(\d x)
+\int\limits_{[m,\infty)}\underbrace{|x-t|-|x-m|}_{x-t-(x-m)=m-t} F(\d x)\\
&\geq-(m-t)\cdot \underbrace{Q((-\infty,t])}_{F(t)}+
\Big(-(m-t)\cdot F(m-)-F(t)\Big)
+(m-t)\cdot\underbrace{Q([m,\infty))}_{1-\underbrace{Q((-m,m)}_{F(m-)}}\\
&=-\underbrace{(m-t)}_{\geq0}\cdot(\underbrace{1-2\cdot F(m-)}_{\stackrel{1.}{\geq}0})\\
&\geq0
\end{align*}

\underline{Fall 2: $t> m$}
\begin{align*}
h(t)&=\int\limits_{(-\infty,m]}\ldots F(\d x)+\int\limits_{(m,t]}\ldots+\int\limits_{(t,\infty)}\ldots F(\d x)\\
&\ldots\\
&\geq(t-m)\cdot(\underbrace{2\cdot F(m)-1}_{\stackrel{1.}{\geq}0})\\
&\geq0
\end{align*}

\underline{Fall 3: $t=m$} ist trivial. $\#$\\

\underline{Zeige (b) $\Rightarrow$ (a):}\\
Nach Annahme ist $h(t)\geq0~\forall t\in\R$.\\

\underline{Fall 1: $t<m$} Die obige Rechnung im Fall 1 bei 1. $\Rightarrow$ 2. zeigt:
\begin{align*}
0\leq h(t)&=-(m-t)\cdot F(t)+\int\limits_{(t,m)}\underbrace{\underbrace{x}_{<m}-t-(m-x) }_{=2x-t-m\leq m-t}F(\d x)+(m-t)\cdot(1-F(m-))\\
&\leq-(m-t)\cdot\Big(F(t)-1\underbrace{+F(m-)-F(m-)}_{=0}+F(t)\Big)\\
&=\underbrace{(m-t)}_{>0}\cdot(1-2\cdot F(t))\\
&\Longrightarrow\forall t<m:0\leq(m-t)\cdot(1-2\cdot F(t))\\
&\Longrightarrow\forall t<m:0\leq 1-2\cdot F(t)\\
&\Longrightarrow\forall t<m:F(t)\leq\frac{1}{2}\\
&\stackrel{t\uparrow m}{\Longrightarrow}F(m-)\leq\frac{1}{2}
\end{align*}
\underline{Fall 2: $t> m$} Siehe 2. Fall, analog.\\

\underline{Zeige (a) $\gdw$ (c):}
(b) ist offensichtlich äquivalent zur Definition des Medians.
\end{proof}

\begin{bemerkungnr}\
\begin{enumerate}
\item Lemma \ref{lemmaMedian} (a) besagt, dass $\lbrace m\in\R: m\text{ erfüllt } 1.\rbrace$ die Menge aller Mediane von $F$ ist.
\item Im Allgemeinen gibt es mehrere Mediane. Üblicherweise \underline{wählt} man $m:=F^{-1}(\frac{1}{2})$, wobei
\begin{align*}
F^{-1}(u):=\inf\left\lbrace x\in\R:F(x)\geq u\right\rbrace\quad\forall u\in (0,1)
\end{align*}
die \textbf{Quantilfuntion / die verallgemeinerte Inverse} ist. Da
\begin{align*}
F\left(F^{-1}(u)-\right)\leq u\leq F\left(F^{-1}(u)\right)\qquad\forall u\in (0,1),
\end{align*}
erfüllt $m=F^{-1}\left(\frac{1}{2}\right)$ die Bedingung (a) in Lemma \ref{lemmaMedian} und ist somit ein Median, nämlich der kleinste.
\item Die obige Funktion \eqref{DefY}, also
\begin{align*}
Y:\R\to\R,\qquad Y(t)=\int\limits|x-t|~F(\d x)\qquad\forall t\in\R,
\end{align*}
ist stetig (nutze Folgenkriterium + dominierte Konvergenz bzw. Satz von Lebesgue), aber im Allgemeinen nicht differenzierbar, z. B. falls $F\sim X$ eine diskrete Zufallsvariable ist. In diesem Fall ist somit die Minimierung über Differentiation nicht möglich!
\end{enumerate}
\end{bemerkungnr}

Zur Schätzung von $m$ seien $X_1,\ldots, X_n$ i.i.d.$\sim F$ mit zugehöriger \textbf{empirischer Verteilungsfunktion}
\begin{align*}
F_n(x):=\frac{1}{n}\cdot\sum\limits_{i=1}^n\indi_{\lbrace X_i\leq x\rbrace}\qquad\forall x\in\R.
\end{align*}
Tatsächlich ist $F_n$ die Verteilungsfunktion zum \textbf{empirischen Maß}
\begin{align*}
Q_n:=\frac{1}{n}\cdot\sum\limits_{i=1}^n\delta_{X_i}\text{ wobei }\delta_x\text {das Dirac-Maß in}x\in\R
\end{align*}

Gemäß dem Satz von Gliwenko-Cantelli gilt:
\begin{align*}
\sup\limits_{x\in\R}|F_n(x)-F(x)|\stackrel{n\to\infty}{\longrightarrow}0\text{ konvergiert $\P$-fast sicher für alle Vereteilungsfunktionen }F
\end{align*}

\begin{erinnerung}
Für das Dirac-Maß $\delta_x:\A\to\R_+,\qquad\delta_x(A):=\indi_A(x)$ gilt:
\begin{align*}
\int\limits f(t)~\delta_x(\d t)=f(x)
\end{align*}
\end{erinnerung}

Ein vages Stetigkeitsargument motiviert folgenden Schätzer für $m$:
\begin{align*}
\hat{m}_n&:=\arg\min\limits_{t\in\R}Y_n(t):=\text{ (irgendeine) Minimalstelle der Funktion}\\
Y_n(t)&:=\int\limits_\Omega |x-t|F_n(\d x)\\ 
&=\int\limits_\Omega |x-t|Q_n(\d x)\\ 
&=\frac{1}{n}\cdot\sum\limits_{i=1}^n\int\limits|x-t|~\delta_{X_i}(\d x)\\
&=\frac{1}{n}\cdot\sum\limits_{i=1}^n|X_i-t|
\end{align*} 

$\hat{m}_n$ heißt \textbf{empirischer Median} von $X_1,\ldots,X_n$ mit üblicher Auswahl $\hat{m}_n=F_n^{-1}\left(\frac{1}{2}\right)$ gemäß Lemma \ref{lemmaMedian} (da empirische Verteilungsfunktion eie Verteilungsfunktion ist).

%Hier wäre Abbildung 1

\begin{bemerkung}\
\begin{itemize}
\item Wenn man eine ungerade Anzahl von Daten hat, ist der Median der mittlere Wert, nachdem man die Daten der Größe nach geordnet hat.
\item Hat man hingegen eine gerade Anzahl an Daten, dann ist der Median der kleinere der beiden mittleren Werte.
\end{itemize}
\end{bemerkung}

Mit dem starken Gesetz der großen Zahlen (SGGZ) gilt
\begin{align}\label{eq1.1}
\forall t\in\R: \Big(Y_n(t)\stackrel{n\to\infty}{\longrightarrow}
\E[|X_1-t|]=Y(t)\text{ fast sicher}\Big)
\end{align}
Problem: Folgt aus \eqref{eq1.1} bereits, dass
\begin{align*}
\arg\min\limits_{t\in\R} Y_n(t)
\stackrel{n\to\infty}{\longrightarrow}
\arg\min\limits_{t\in\R}
Y(t)\text{ fast sicher?}
\end{align*}
Dann folgte:
\begin{align*}
\hat{m}_n
\stackrel{n\to\infty}{\longrightarrow}
m\text{ fast sicher (\textbf{starke Konvergenz})}
\end{align*}

Wir formalisieren und verallgemeinern:
\begin{align*}
&X_i:(\Omega, \A,P)\to(\R,\B(\R))\text{ messbar},\qquad\omega\mapsto X_i(\omega)\\
&\Longrightarrow
Y_n(t):=Y_n(t,\omega)=
\frac{1}{n}\cdot\sum\limits_{i=1}^n\left|X_i(\omega)-t\right|\\
&\Longrightarrow
Y_n(t,\cdot):(\Omega,\A)\to(\R,\B(\R))\text{ messbar }\forall t\in\R
\end{align*}

\begin{defi}
Die \textbf{Kollektion}
\begin{align*}
Y_n:=\lbrace Y_n(t,\cdot):t\in\R\rbrace
=\lbrace Y_n(t):t\in\R\rbrace
\end{align*}
heißt \textbf{stochastischer Prozess (SP)}. Die Abbildung
\begin{align*}
X_n(\cdot,\omega):\R\to\R,\qquad t\mapsto Y_n(t,\omega)
\end{align*}
heißt \textbf{Trajektorie / Pfad} des SP $Y_n$ zu festem $\omega\in\Omega$.
\end{defi}

In unserem Beispiel sind für \underline{alle} $\omega\in\Omega$ die Pfade stetig auf $\R$. Die Abbildung
\begin{align*}
Y_n:\Omega\to X C(\R,\R),\qquad\omega\mapsto Y_n(\cdot,\omega)
\end{align*}
heißt \textbf{Pfadabbildung} des SP $Y_n$. Wir identifizieren also den SP $Y_n$ mit seiner Pfadabbildung. Damit ist $Y_n$ eine Abbildung von $\Omega$ in den Funktionenraum 
\begin{align*}
C(\R):=C(\R,\R):=\lbrace f:\R\to\R: f\text{ ist stetig }\rbrace.
\end{align*}

Sei $d:C(\R)\times C(\R\to\R$ die Metrik der gleichmäßigen Konvergenz der Kompakta auf $\C(\R)$ (formale Definition kommt später) und sei
\begin{align*}
\B(C(\R)):=\B_d\big(C(\R)\big)=\sigma\big(\lbrace G\subseteq C(\R):G\text{ ist offen bzgl. }d\rbrace\big)
\end{align*}
die von $d$ induzierte \textbf{Borel-$\sigma$-Algebra}.\\
Wir werden sehen, dass die Abbildung
\begin{align*}
Y_n:(\Omega,\A,\P)\to\Big(C(\R),\B\big(C(\R)\big)\Big)
\end{align*}
messbar ist. $Y_n$ ist also eine Zufallsvariable mit Werten im metrischen Raum $\big(C(\R),d\big)$.

Formulierung des Problems im allgemeinen Rahmen:
Seien $Y_n,~n\in\N$ mit $Y$ SP mit stetigen Pfaden (stetige SP).
Was lässt sich sagen über die Gültigkeit der folgenden Implikationen?
\begin{align}
Y
\stackrel{n\to\infty}{\longrightarrow}
Y\text{ fast sicher }
\Longrightarrow
\arg\min\limits_{t\in\R} Y(t)
\stackrel{n\to\infty}{\longrightarrow}
\arg\min\limits_{t\in\R} Y(t)\text{ fast sicher}
\end{align}
Ziel: Welche Art der Konvergenz $Y_n\stackrel{n\to\infty}{\longrightarrow} Y$ reicht für obige Implikation aus? Gleichmäßige Konvergenz, gleichmäßige Konvergenz auf Kompakta punktweise Konvergenz oder sogar nur \eqref{eq1.1}?\\
$Y$ besitzt womöglich (unter positiven Wahrscheinlichkeiten) keine eindeutige Minimalstelle. Und dann?\\

Für die Konstruktion von (asymptotischen) Konfidenzintervallen für $m$ benötigt man \textbf{Verteilungskonvergenz}:
\begin{align}\label{eq1.3}
a_n(\hat{m}_n-m)
\stackrel{\mathcal{L}}{\longrightarrow}\xi\text{ in }\R
\end{align}
wobei $a_n\to\infty$ in $\xi$ Grenzvariable, die es zu identifizieren gilt. Für die Herleitung von \eqref{eq1.3} favorisiere wieder einen \textit{funktionalen Ansatz}. Sei
\begin{align*}
Z_n(t):=\beta_n\cdot\left( Y_n\left(m+\frac{t}{a_n}\right)-Y_n(m)\right)\qquad t\in\R
\end{align*}
der sogenannte \textbf{reskalierte Prozess zu $Y_n$}, wobei $\beta_n$ deine geeignete positive Folge ist. Damit folgt
\begin{align}\label{1.4}
a_n(\hat{m}_n-m)=\arg\min\limits_{t\in\R} Z_n(t)
\end{align}
Klar: $Z_n$ ist wieder ein stetiger stochastischer Prozess und damit $(Z_n)_{n\in\N}$ eine Folge von Zufallsvariablen in $\big(C(\R),d\big)$. Wünschenswert auch hier wäre die Gültigkeit folgender Implikation:
\begin{align}\label{eqSternchen}\tag{$\ast$}
Z_n
\stackrel{\mathcal{L}}{\longrightarrow}
Z\text{ in } \big(C(\R),d\big)
\Longrightarrow
\arg\min\limits_{t\in\R} Z_n(t)
\stackrel{\mathcal{L}}{\longrightarrow}
\arg\min\limits_{t\in\R} Z(t)
\end{align}
Dazu erforderlich ist das Konzept der \textbf{Verteilungskonvergenz} von Zufallsvariablen in metrischen Räumen, damit \eqref{eqSternchen} eine wohldefinierte Bedeutung erhält. Dies folgt später. Natürlich auch hier wieder das Problem: $Z$ besitzt mit positiver Wahrscheinlichkeit mindestens 2. Minimalstellen. Und dann?\\

Im Falle einer fast sicher eindeutigen Minimalstelle von $Z$ würde aber aus (1.4) und (1.5) folgen:
\begin{align*}
a_n(\hat{m}_n-m)
\stackrel{\mathcal{L}}{\longrightarrow}
\arg\min\limits_{t\in\R} Z(t)
\end{align*}


\section{Konzepte aus metrischen Räumen}
Sei $(\mathcal{S},d)$ metrischer Raum.

\begin{beispiel}[Supremums-Metrik] %2.1
\begin{align*}
\mathcal{S}=C([0,1]):=\big\lbrace f:[0,1]\to\R: f\text{ stetig}\big\rbrace\\
d(f,g):=\sup\limits_{t\in[0,1]}\big|f(t)-g(t)\big|,\qquad\forall f,g\in C([0,1])
\end{align*}
\end{beispiel}

\begin{definition}\
\begin{enumerate}[label={(\arabic*)}]
\item Für $x\in\mathcal{S},~r>0$ ist
\begin{align*}
B(x,r):=B_d(x,r):=\lbrace y\in\mathcal{S}:d(x,y)<r\rbrace
\end{align*}
die offene Kugel um Mittelpunkt $x$ und Radius $r$.
\item Sei $A\subseteq\mathcal{S}$. Dann:
\begin{align*}
\stackrel{\circ}{A}&:=\inner(A):=\text{ das Innere von }A\\
\overline{A}&:=\text{ Abschluss von }A\\
\partial A&:=\overline{A}\cap\overline{A^C}=\overline{A}\setminus\stackrel{\circ}{A}\text{ ist der Rand von }A\\
A^C&:=\mathcal{S}\setminus A
\end{align*}
\item \begin{align*}
\mathcal{G}:=\mathcal{G}(\mathcal{S})&:=\big\lbrace G\subseteq\mathcal{S}: G\text{ ist offen bzgl. }d\big\rbrace\\
&=\big\lbrace G\subseteq\mathcal{S}:\forall x\in G:\exists r>0:B_d(x,r)\subseteq G\big\rbrace
\end{align*}
ist die durch $d$ induzierte Topologie.
\begin{align*}
\mathcal{F}:=\mathcal{F}(\mathcal{S}):=\big\lbrace F\subseteq\mathcal{S}:F\text{ ist abgeschlossen}\big\rbrace
\end{align*}
\item Sei $\emptyset\neq A\subseteq\mathcal{S},~x\in\mathcal{S}$. Dann ist
\begin{align*}
d(x,A):=\inf\lbrace d(x,a):a\in A\rbrace\geq0
\end{align*}
der Abstand von $x$ zu $A$.
\item $C(\mathcal{S}):=\lbrace f:S\to\R:f\text{ stetig}\rbrace$
\begin{align*}
C^b(\mathcal{S}):=\lbrace f\in C(\mathcal{S}):f\text{ beschränkt}\rbrace\\
\Vert f\Vert:=\Vert f\Vert_\infty:=\sup\limits_{x\in\mathcal{S}}|f(x)|
\end{align*}
\end{enumerate}
\end{definition}

\begin{lemma}\label{lemma2.3}\ %2.3
\begin{enumerate}[label={(\arabic*)}]
\item $\begin{aligned}
x\in\overline{A}\Longleftrightarrow d(x,A)=0
\end{aligned}$
\item $\begin{aligned}
\big| d(x,A)-d(y,A)\big|\leq d(x,y)\qquad\forall x,y\in\mathcal{S}
\end{aligned}$
\item $\begin{aligned}
d(\cdot, A):\mathcal{S}\to\R,\qquad x\mapsto d(x,A)
\end{aligned}$ ist gleichmäßig stetig ($A\neq\emptyset$).
\end{enumerate}
\end{lemma}

\begin{proof}
\underline{Zeige (1) ``$\Rightarrow$'':} Sei $x\in\overline{A}$. Dann gilt:
\begin{align*}
&\forall\varepsilon>0:\exists a\in A: d(x,a)<\varepsilon\\
&\implies d(x,A)\leq d(x,a)<\varepsilon~\forall\varepsilon>0\\
&\stackrel{\varepsilon\to0}{\implies}
d(x,A)=0
\end{align*}
\underline{Zeige (1) ``$\Leftarrow$'':}
Sei $d(x,A)=0$. Dann folgt aus der Infimumseigenschaft:
\begin{align*}
&\forall\varepsilon>0:\exists a\in A;0\leq d(x,a)\leq0+\varepsilon=\varepsilon\\
&\implies x\in\overline{A}
\end{align*}
\underline{Zeige (2):} Seien $x,y\in\mathcal{S}$. Dann gilt:
\begin{align*}
&d(x,a)
\stackrel{\Delta\text{Ungl}}{\leq}
d(x,y)+d(y,a)\qquad\forall a\in A\\
&\implies
d(x,A)\leq d(x,y)+d(y,A)\implies d(x,A)-d(y,A)\leq d(x,y)
\end{align*}
Vertauschen von $x$ und $y$ liefert:
\begin{align*}
d(y,A)-d(x,A)\leq d(y,x)=d(x,y)\implies\text{ Behauptung}
\end{align*}
\underline{Zeige (3):} Folgt aus (2) da, die Funktion $d(\cdot,A)$ Lipschitz-stetig und damit gleichmäßig stetig ist.
\end{proof}

\begin{satz} %2.4
Zu $A\subseteq\mathcal{S}$ und $\varepsilon>0$ existiert ein gleichmäßig stetige Funktion 
\begin{align*}
f:\mathcal{S}\to[0,1]\text{ mit der Eigenschaft} f(x)=\left\lbrace\begin{array}{cl}
1, & \falls x\in A\\
0, & \falls d(x,A)\geq\varepsilon
\end{array}\right.
\end{align*}
\end{satz}
\begin{proof}
Setze
\begin{align*}
\varphi:\R\to[0,1],\qquad \varphi(t):=\left\lbrace\begin{array}{cl}
1 , & \falls t\leq0\\
1-t, & \falls 0<1<1\\
0, & \falls t\geq1
\end{array}\right.
\end{align*}
Dann ist $\varphi$ gleichmäßig stetig auf $\R$. Sei
\begin{align*}
f(x):=\varphi\left(\frac{1}{\varepsilon}\cdot d(x,A)\right)\qquad\forall x\in\S
\end{align*}
Dann hat dieses $f$ die gewünschte Eigenschaft wegen Lemma \ref{lemma2.3}.
\end{proof}

\begin{definition} %2.5
Ein metrischer Raum $(\S,d)$ heißt \textbf{separabel}
\begin{align*}
&:\Longleftrightarrow\exists\text{ abzählbares } S_0\subseteq\S:\S\subseteq\overline{S_0}\\
&\Longleftrightarrow\exists\text{ abzählbares } S_0\subseteq\S:\S=\overline{S_0}\\
&\Longleftrightarrow\exists\text{ abzählbares } S_0\subseteq\S:S_0\text{ liegt dicht in }\S
\end{align*}
\end{definition}

\begin{beispiel} %2.6
$C([0,1])$ mit Supremums-Metrik ist separabal.
\begin{proof}
\begin{align*}
S_0:=\big\lbrace P:P\text{ ist Polynom mit \underline{rationalen} Koeffizienten}\big\rbrace
\end{align*}
$S_0$ ist abzählbar. Aus dem \textit{Approximationssatz von Weierstraß} und der Dichtheit von $\Q$ folgt die Behauptung.
\end{proof}
\end{beispiel}

\begin{definition} %2.7
$\G_0\subseteq\G$ heißt \textbf{Basis} von $\G:\Longleftrightarrow\forall G\in\G:G$ ist Vereinigung von Mengen aus $\G_0$, so genannte \textbf{$\G_0$-Mengen}.
\end{definition}

\begin{beispiel} %2.8
Die Menge
\begin{align*}
\big\lbrace B(x,r):x\in\S,0<r\in\Q\big\rbrace
\end{align*}
ist Basis von $\G$, denn:
\begin{proof}
Sei $G\in\G$. Dann gilt:
\begin{align*}
&\forall x\in G:\exists 0<r_x\in\Q:B(x,r_x)\subseteq G\\
&\implies
G=\bigcup\limits_{x\in G}\underbrace{\lbrace x\rbrace}_{\subseteq B(x,r_x)}\subseteq\bigcup\limits_{x\in G} \underbrace{B(x,r_x)}_{\subseteq G}\subseteq G\implies G=\bigcup\limits_{x\in G} \underbrace{B(x,r_x)}_{\in\G_0}
\end{align*}
\end{proof}
\end{beispiel}

\begin{satz}\label{satz2.9}
$\S$ separabel $\Longleftrightarrow\G$ hat abzählbare Basis
\end{satz}
\begin{proof}
\underline{Zeige ``$\Rightarrow$'':}\\
Sei $S_0\subseteq\S$ abzählbar und dicht in $\S$. Zeige:
\begin{align*}
\G_0:=\big\lbrace B(x,r):x\in S_0,0<r\in\Q\big\rbrace\subseteq\G\text{ ist Basis.}
\end{align*}
Sei also $G$ offen. Dann folgt aus Beispiel 2.8:
\begin{align}\label{proof2.9Sternchen}\tag{$\ast$}
G=\bigcup\limits_{x\in G} B(x,r_x),\qquad 0<r_x\in\Q,\forall x\in G
\end{align}
Da $\overline{S_0}=\S$ gilt:
\begin{align*}
&\forall x\in G:\exists y_x\in S_0: d(x,y_x)<\frac{r_x}{2}\\
&\implies d(x,y)
\stackrel{\Delta\text{Ungl}}{\leq}
d(x,y_x)+d(y_x,x)< \underbrace{\frac{r_x}{2}+\frac{r_x}{2}}_{=r_x}\qquad\forall y\in B\left(y_x,\frac{r_x}{2}\right)\\
&\implies B\left(y_x,\frac{r_x}{2}\right)\subseteq B(x,r_x)\qquad\forall x\in G\\
&\implies G\stackrel{\eqref{proof2.9Sternchen}}{\supseteq}
\bigcup\limits_{x\in G}\underbrace{B\left(y_x,\frac{r_x}{2}\right)}_{\supseteq\lbrace x\rbrace}
\supseteq\bigcup\limits_{x\in G}\lbrace x\rbrace=G\\
&\implies G=\bigcup	\limits_{x\in G}\underbrace{B\left(y_x,\frac{r_x}{2}\right)}_{\in\G_0}
\end{align*}
Also ist $\G_0$ einen Basis. Da $S_0$ abzählbar ist $\G_0$ abzählbar.\\

\underline{Zeige ``$\Leftarrow$'':}\\
Sei $\G_0$ abzählbare Basis von $\G$ und sei o.B.d.A. $\emptyset\notin\G_0$. Wähle für jedes $G\in\G_0$ ein $x_G\in G$ fest aus. Setze
\begin{align*}
S_0:=\lbrace x_G:G\in\G_0\rbrace.
\end{align*}
$S_0$ ist auch abzählbar. Bleibt Dichtheit zu zeigen.\\
Sei $x\in\S$ und $\varepsilon>0$. Da $B(x,\varepsilon)$ offen und $\G_0$ Basis, gilt: 
\begin{align*}
&\exists\G_{x,\varepsilon}\subseteq\G_0\mit B(x,\varepsilon)=\bigcup\limits_{G\in\G_{x,\varepsilon}} G\\
&\implies G\subseteq B(x,\varepsilon)\qquad\forall G\in\G_{x\varepsilon}
\end{align*}
Wähle ein $G$ von diesen aus. Dann gilt:
\begin{align*}
x_G\in G\subseteq B(x,\varepsilon)
\implies x_G\in B(x,\varepsilon)
\implies d(\underbrace{x_G}_{\in S_0},x)<\varepsilon
\end{align*}
\end{proof}

\begin{satz} %2.10
Seien $(\S,d)$ und $(\S',d')$ metrische Räume.
\begin{enumerate}[label={(\arabic*)}]
\item Auf $\S\times\S'$ sind Metriken definiert durch
\begin{align*}
d_1\Big((x,x'),(y,y')\Big):=\left( \big(d(x,y)\big)^2+\big(d'(x',y')\big)^2\right)^{\frac{1}{2}}\qquad\forall(x,x'),(y,y')\in \S\times\S'
\end{align*}
\end{enumerate}
\end{satz}